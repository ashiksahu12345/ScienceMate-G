{% extends "portal/base.html" %}

{% block content %}
<h3 class="mb-3">⬆️ Upload Question</h3>

<p class="text-muted">
  Use this when you have a full question (numerical / theory / screenshot text) and
  you want to store it for solving later.
</p>

<div class="row g-4">
  <!-- Form -->
  <div class="col-md-6">
    <div class="card shadow-sm">
      <div class="card-header fw-bold">
        Submit a new question
      </div>
      <div class="card-body">
        <form method="post">
          {% csrf_token %}
          <div class="mb-3">
            <label class="form-label">Subject</label>
            {{ form.subject }}
          </div>
          <div class="mb-3">
            <label class="form-label">Topic (optional)</label>
            {{ form.topic }}
          </div>
          <div class="mb-3">
            <label class="form-label">Question</label>
            {{ form.text }}
          </div>
          <button class="btn btn-primary">Save Question</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Recent questions -->
  <div class="col-md-6">
    <div class="card shadow-sm">
      <div class="card-header fw-bold">
        Recent questions
      </div>
      <div class="card-body" style="max-height: 360px; overflow-y: auto;">
        {% if recent_questions %}
          <ul class="list-group list-group-flush">
            {% for q in recent_questions %}
              <li class="list-group-item small">
                <div class="d-flex justify-content-between">
                  <span class="fw-semibold text-capitalize">
                    {{ q.subject }} – {{ q.topic|default:"(No topic)" }}
                  </span>
                  <span class="text-muted">
                    {{ q.created_at|date:"d M, H:i" }}
                  </span>
                </div>
                <div class="mt-1">
                  {{ q.text|truncatechars:150 }}
                </div>
                <div class="text-muted mt-1">
                  status: {{ q.status }}
                </div>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <p class="text-muted mb-0">No questions submitted yet.</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
